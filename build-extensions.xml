<?xml version="1.0" encoding="UTF-8"?>
<project name="birf-ext">
	<property name="MAX_MEMORY" value="512m" />
	<property name="STRICT" value="true" />
	<property name="SHOW_DEPRECATION_WARNINGS" value="false" />
	<property name="SWF_VERSION" value="14" />
	<property name="TARGET_PLAYER_VERSION" value="11.1.0" />
	
	<target name="compile">
		<antcall target="birf-ext.compile-utils" />
	</target>
	
	<target name="compile-release">
		<antcall target="birf-ext.compile-utils-release" />
	</target>
	
	<target name="compile-utils">
		<echo message="__[ COMPILING UTILS DEBUG SWC ]__" />
		<compc output="${OUT_DIR}/birf-utils-v${BUILD_VERSION}-debug.swc"
				optimize="false"
				debug="true"
				compiler.as3="true"
				incremental="true"
				strict="${STRICT}"
				maxmemory="${MAX_MEMORY}"
				compiler.show-deprecation-warnings="${SHOW_DEPRECATION_WARNINGS}"
				swf-version="${SWF_VERSION}"
				target-player="${TARGET_PLAYER_VERSION}">
			<load-config filename="${FLEX_HOME}/frameworks/flex-config.xml" />
			<compiler.define name="CONFIG::VERSION" value="'${BUILD_VERSION}'" />
			<compiler.define name="CONFIG::DEBUG" value="false" />
			<!-- Source code to compile. -->
			<source-path path-element="${EXT_DIR}/src" />
			<include-sources dir="${EXT_DIR}/src" includes="*" />
			<!-- Libs to use during compilation (not included in final SWC). -->
			<external-library-path dir="${OUT_DIR}" append="true">
				<include name="birf-v${BUILD_VERSION}-debug.swc" />
			</external-library-path>
			<external-library-path dir="${LIB_DIR}" append="true">
				<include name="*.swc" />
			</external-library-path>
		</compc>
	</target>
	
	<target name="compile-utils-release">
		<echo message="__[ COMPILING UTILS RELEASE SWC ]__" />
		<compc output="${OUT_DIR}/birf-utils-v${BUILD_VERSION}-debug.swc"
				optimize="true"
				debug="false"
				compiler.as3="true"
				incremental="true"
				strict="${STRICT}"
				maxmemory="${MAX_MEMORY}"
				compiler.show-deprecation-warnings="${SHOW_DEPRECATION_WARNINGS}"
				swf-version="${SWF_VERSION}"
				target-player="${TARGET_PLAYER_VERSION}">
			<load-config filename="${FLEX_HOME}/frameworks/flex-config.xml" />
			<compiler.define name="CONFIG::VERSION" value="'${BUILD_VERSION}'" />
			<compiler.define name="CONFIG::DEBUG" value="false" />
			<!-- Source code to compile. -->
			<source-path path-element="${EXT_DIR}/src" />
			<include-sources dir="${EXT_DIR}/src" includes="*" />
			<!-- Libs to use during compilation (not included in final SWC). -->
			<external-library-path dir="${OUT_DIR}" append="true">
				<include name="birf-v${BUILD_VERSION}.swc" />
			</external-library-path>
			<external-library-path dir="${RELEASE_LIB_DIR}" append="true">
				<include name="*.swc" />
			</external-library-path>
		</compc>
	</target>
</project>